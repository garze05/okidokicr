---
import Video from "../components/Video.astro";
import testimonios from "../content/testimonials.json";
---

<section class="container mx-auto px-4 py-16 sm:px-6 lg:px-8">
  <h1
    data-aos="fade-in"
    class="text-secondary-500 font-primary max-w-[100%] py-5 text-center text-3xl font-medium sm:py-10 sm:text-4xl md:text-left lg:text-7xl xl:text-8xl"
  >
    NUESTROS CLIENTES <span class="from-primary-500 bg-gradient-to-r to-[#FF7E00] bg-clip-text font-bold text-transparent">HABLAN</span>
  </h1>

  <!-- <div class="grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4">
    {testimonios.map((testimonio, index) => (
      <div
        data-aos="fade-up"
        class="bg-primary-500 overflow-hidden rounded-lg shadow-lg"
      >
        <div class="w-full">
          <Video 
            publicId={testimonio.videoId}
            orientation={testimonio.orientation}
          />
          <div class="p-4 text-white">
            <h3 class="text-lg font-semibold">{testimonio.title}</h3>
            <p class="text-sm">{testimonio.author}</p>
            <p class="text-xs opacity-80">{testimonio.role}</p>
          </div>
        </div>
      </div>
    ))}
  </div> -->

  <!-- SwiperJS -->
  <div class="t swiper">
    <div class="t swiper-wrapper">
      {testimonios.map((testimonio) => (
        <div class={`t swiper-slide ${testimonio.orientation === 'vertical' ? 'vertical' : 'horizontal'}`}>
          <div class="bg-primary-500 h-full overflow-hidden rounded-lg shadow-lg">
            <div class="relative w-full h-full">
              <Video 
                publicId={testimonio.videoId}
                orientation={testimonio.orientation}
              />
              <div class="absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/70 to-transparent p-4 text-white">
                <h3 class="text-lg font-semibold">{testimonio.title}</h3>
                <p class="text-sm">{testimonio.author}</p>
                <p class="text-xs opacity-80">{testimonio.role}</p>
              </div>
            </div>
          </div>
        </div>
      ))}
    </div>
    <div class="t-swiper-pagination"></div>
  </div>
  
  <style>
    .t.swiper {
      padding: 50px 0;
      width: 100%;
    }
  
    .t.swiper-slide {
      height: auto;
      transition: all 0.3s ease;
    }
  
    .t.swiper-slide-active {
      transform: scale(1.05);
    }
  </style>
  
  <script>
    import Swiper from "swiper/core";
  
    const swiper = new Swiper(".t.swiper", {
      initialSlide: 0,
      centeredSlides: true,
      speed: 900,
      grabCursor: true,
      effect: "coverflow",
      coverflowEffect: {
        rotate: 0,
        stretch: 0,
        depth: 100,
        modifier: 2,
        slideShadows: true,
      },
      keyboard: {
        enabled: true,
      },
      pagination: {
        el: ".t-swiper-pagination",
        clickable: true,
      },
      breakpoints: {
        320: {
          slidesPerView: 1,
          spaceBetween: 20,
        },
        640: {
          slidesPerView: 2,
          spaceBetween: 30,
        },
        1024: {
          slidesPerView: 3,
          spaceBetween: 40,
        },
        1440: {
          slidesPerView: 4,
          spaceBetween: 50,
        }
      }
    });
</script>
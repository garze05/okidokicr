---
import "../styles/global.css";

// Component Imports
import MainLayout from "../layouts/MainLayout.astro";
import Button from "../components/Button.astro";
import ServicioCard from "../components/ServicioCard.astro";
import HeroCarousel from "../components/HeroCarousel.astro";
import Testimonios from "../components/Testimonios.astro";
// Astro
import Image from "astro/components/Image.astro";
import { Icon } from "astro-icon/components";

// Images
// Hero
import RanaHero from "../images/rana_rocky2.png";
import AniversarioHero from "../images/aniversario-hero.svg";

// Que es OkiDoki
import RanaRockera from "../images/rana_rocky1.png";

// promos.sort((a, b) => a.priority - b.priority);

// Servicios
import Botargas from "../images/MarioBros.jpeg";
import Magos from "../images/MagoLuigi.jpg";
import PintaCaritas from "../images/PintaCaritas.jpg";
import Payasos from "../images/Payasita.jpg";
import Inflables from "../images/Inflable.jpg";
import MasServicios from "../images/grupopersonajes.jpg";
import WelcomeVideo from "../components/WelcomeVideo.astro";

// Links
import { socialLinksList } from "../components/SocialLinks.astro";
const whatsappLink = socialLinksList.whatsapp.url;

// Full Astro Component Syntax:
// https://docs.astro.build/basics/astro-components/
---

<MainLayout title="Inicio">
  <WelcomeVideo pathMp4="/media/30aniversario.mp4" />
  <!-- Hero Carousel -->
  <section class="relative">
    <HeroCarousel />
  </section>
  <!-- Timeline -->
  <!-- <div class="container mx-auto px-4 py-16">
    <h2 class="text-3xl font-bold text-center mb-12">Nuestra Historia</h2>
    <div class="relative">

      <div class="border-l-4 border-blue-500 pl-8 mb-12 relative">
        <div class="absolute w-4 h-4 bg-blue-500 rounded-full -left-[10px] top-0"></div>
        <h3 class="text-xl font-bold">1994: Fundación</h3>
        <p class="mt-2">Abrimos nuestras puertas en el corazón de la ciudad...</p>
      </div>

    </div>
  </div> -->
  <!--Galeria https://github.com/claudiabdm/astro-carousel?tab=readme-ov-file -->
  <section>
    <!-- <img class="-z-10 w-md absolute left-[150px] sm:left-[50%]" alt="" src="/src/images/rana_rocky1.png" /> -->
    <div
      class="bg-black-okidoki -z-20 grid h-fit grid-cols-1 gap-8 px-4 pt-30 pb-20 sm:px-10 md:grid-cols-2 lg:px-30 xl:px-40"
    >
      <div>
        <p class="text-gray-okidoki font-okidoki text-4xl opacity-50">
          oKiDoki
        </p>
        <p
          data-aos="fade-in"
          class="font-secondary mt-4 max-w-md text-3xl text-white sm:text-4xl md:text-5xl md:leading-13 lg:leading-12"
        >
          Creamos momentos
          <span
            class="from-primary-500 font-primary bg-gradient-to-r to-[#FF7E00] bg-clip-text font-bold text-transparent lg:text-6xl"
            >inolvidables</span
          >
          para personas
          <span
            class="from-primary-500 font-primary bg-gradient-to-r to-[#FF7E00] bg-clip-text font-bold text-transparent lg:text-6xl"
            >inolvidables.</span
          >
        </p>
        <p
          data-aos="fade-in"
          class="text-gray-okidoki text-md mt-10 max-w-lg leading-10 md:text-lg"
        >
          Nuestra experiencia nos ha enseñado que cada evento es único, y por
          eso nos especializamos en ofrecer experiencias personalizadas que van
          más allá de lo esperado.
        </p>
      </div>
      <div data-aos="fade-left" class="flex items-center">
        <Image src={RanaRockera} alt="" />
      </div>
    </div>
  </section>
  <div id="testimonios"></div>

  <!-- Testimonios -->
  <Testimonios />

  <!-- Servicios -->
  <section id="servicios">
    <div class="bg-primary-500 mx-auto px-4 py-20 sm:px-10 lg:px-10 xl:px-40">
      <h1
        data-aos="fade-in"
        class="font-primary py-10 text-center text-4xl font-semibold text-white sm:text-7xl lg:text-8xl xl:text-9xl"
      >
        SERVICIOS
      </h1>
      <div class="grid grid-cols-1 gap-6 md:grid-cols-2 xl:grid-cols-3">
        <ServicioCard
          image={Botargas}
          title="Botargas"
          icon="hugeicons:super-mario"
        >
          <Fragment slot="hover-description"
            >Más de <span class="text-xl font-semibold">100</span> personajes del
            cine, videojuegos y TV</Fragment
          >
        </ServicioCard>

        <ServicioCard image={Magos} title="Magos" icon="mdi:magic">
          <Fragment slot="hover-description"
            >Efectos mágicos que sorprenden a chicos y adultos</Fragment
          >
        </ServicioCard>

        <ServicioCard
          image={PintaCaritas}
          title="Pinta Caritas"
          icon="mdi:paintbrush-outline"
        >
          <Fragment slot="hover-description"
            >Diseños únicos y personalizados para cada niño y niña.</Fragment
          >
        </ServicioCard>

        <ServicioCard
          image={Payasos}
          title="Payasos(sitas)"
          icon="game-icons:clown"
        >
          <Fragment slot="hover-description"
            >Malabares, globoflexia y canciones que enamoran a niños… ¡y
            derriten hasta a los papás más serios!</Fragment
          >
        </ServicioCard>

        <ServicioCard
          image={Inflables}
          title="Inflables"
          icon="game-icons:elven-castle"
        >
          <Fragment slot="hover-description"
            >Castillos inflabes, toboganes gigantes y juegos seguros para que la
            diversión no pare.
          </Fragment>
        </ServicioCard>

        <ServicioCard
          image={MasServicios}
          title="Y mucho más..."
          icon="mdi:star"
        >
          <Fragment slot="hover-description"
            ><a href="https://wa.me/c/50688313232"
              ><Button type="secondary" icon="mdi:arrow-up-right-thick"
                >Ver todos los servicios</Button
              ></a
            ></Fragment
          >
        </ServicioCard>
      </div>
    </div>
  </section>

  <!-- CTA -->
  <section class="relative px-4 py-30 text-center sm:px-10 lg:px-30 xl:px-40">
    <video
      autoplay
      muted
      loop
      playsinline
      class="absolute inset-0 h-full w-full object-cover"
    >
      <source src="/media/fireworks.mp4" type="video/mp4" />
    </video>
    <div class="bg-black-okidoki/80 absolute inset-0"></div>
    <div class="relative z-10">
      <h2
        class="font-primary text-3xl font-bold text-white md:text-5xl lg:text-6xl"
      >
        ¡30 años de magia merecen una <span
          class="from-primary-500 bg-gradient-to-r to-[#FF7E00] bg-clip-text text-transparent uppercase"
          >celebración</span
        > a TU medida!
      </h2>
      <h3 class="text-gray-okidoki mx-auto mt-6 max-w-3xl text-lg md:text-xl">
        Reserva hoy y lleva a casa la experiencia OkiDoki.
      </h3>
      <div class="mt-10">
        <a href={whatsappLink}>
          <Button icon="mdi:whatsapp">¡Sí, quiero mi evento con 25% OFF!</Button
          >
        </a>
      </div>
      <h4 class="text-gray-okidoki mt-6 text-sm font-medium">
        ⏳ Solo hasta el 28 de febrero: Este descuento desaparece con las
        últimas campanadas del mes.
      </h4>
    </div>
  </section>
</MainLayout>

<style is:global>
  .testimonios-slider {
    width: 100%;
    height: auto;
    padding: 1rem 0;
    overflow: visible;
  }

  .testimonio.swiper-slide {
    width: min(320px, 90vw);
    height: auto;
    aspect-ratio: 9/16;
    transform: translateZ(0);
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
    will-change: transform;
  }

  @media (max-width: 640px) {
    .testimonios-slider {
      padding: 0.5rem;
      overflow: hidden;
    }

    .testimonio.swiper-slide {
      width: 100%;
    }

    .testimonios-slider .swiper-button-prev,
    .testimonios-slider .swiper-button-next {
      display: none;
    }
  }
</style>

<script>
  import Swiper from "swiper/bundle";

  document.addEventListener("DOMContentLoaded", () => {
    const testimoniosSlider = new Swiper(".testimonios-slider", {
      effect: "cards",
      grabCursor: true,
      centeredSlides: true,
      slidesPerView: "auto",
      initialSlide: 0,
      updateOnWindowResize: true,
      observer: true,
      observeParents: true,
      navigation: {
        nextEl: ".testimonios-slider .swiper-button-next",
        prevEl: ".testimonios-slider .swiper-button-prev",
      },
      breakpoints: {
        320: {
          slidesPerView: 1,
          effect: "slide",
          spaceBetween: 16,
          watchOverflow: true,
        },
        640: {
          slidesPerView: "auto",
          effect: "cards",
          spaceBetween: 24,
        },
      },
      on: {
        init: function () {
          setTimeout(() => {
            this.update();
          }, 100);
        },
        slideChange: function () {
          const videos = document.querySelectorAll(".testimonios-slider video");
          videos.forEach((video) => video.pause());
        },
      },
    });

    // Handle video playback
    const videos = document.querySelectorAll(".testimonios-slider video");
    videos.forEach((video) => {
      video.pause();
      video.addEventListener("play", () => {
        videos.forEach((v) => {
          if (v !== video) v.pause();
        });
      });
    });
  });
</script>
